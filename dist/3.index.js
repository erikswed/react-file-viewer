(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{27:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(i(0)),o=l(i(38)),r=u(i(58)),a=u(i(61)),s=u(i(3));function u(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=n?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(i,o,r):i[o]=e[o]}return i.default=e,t&&t.set(e,i),i}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}class p extends n.Component{constructor(e){super(e),this.state={originalWidth:0,originalHeight:0,imageLoaded:!1}}componentDidMount(){const e=new o.TextureLoader;e.crossOrigin="",e.load(this.props.filePath,e=>{this.setState({originalWidth:e.image.width,originalHeight:e.image.height,imageLoaded:!0,texture:e})},e=>{console.log(e.loaded/e.total*100+"% loaded")},e=>{console.log("An error happened",e)})}render(){if(!this.state.imageLoaded)return n.default.createElement(s.default,null);const{originalWidth:e,originalHeight:t}=this.state,i=(o=e,u=t,"jpg"===this.props.fileType&&window.Math.abs(o/u-2)<=.01?a.default:r.default);var o,u;return n.default.createElement(i,h({},this.state,this.props))}}t.default=p},58:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=n?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=e[r]}i.default=e,t&&t.set(e,i);return i}(i(0));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}i(59);class r extends n.Component{componentDidMount(){const{originalWidth:e,originalHeight:t}=this.props,i=this.getImageDimensions.call(this,e,t);this.props.texture.image.style.width=i.width+"px",this.props.texture.image.style.height=i.height+"px",this.props.texture.image.setAttribute("class","photo"),document.getElementById("pg-photo-container").appendChild(this.props.texture.image)}getImageDimensions(e,t){let i,n;const{height:o,width:r}=this.props;if(t<=o&&e<=r)n=e,i=t;else{const a=o/t,s=r/e;a<s?(i=t*a,n=e*a):(i=t*s,n=e*s)}return{height:i,width:n}}render(){const e={width:this.props.width+"px",height:this.props.height+"px"};return n.default.createElement("div",{style:e,className:"photo-viewer-container",id:"pg-photo-container"})}}t.default=r},59:function(e,t,i){var n=i(1),o=i(60);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};n(o,r);e.exports=o.locals||{}},60:function(e,t,i){(t=i(2)(!1)).push([e.i,".pg-viewer-wrapper .photo-viewer-container{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;height:100%;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%}\n",""]),e.exports=t},61:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i(0)),o=a(i(38));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=e[o]}return i.default=e,t&&t.set(e,i),i}i(62);class s extends n.Component{constructor(e){super(e),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.state={manualControl:!1,longitude:0,latitude:0,savedX:void 0,savedY:void 0,savedLongitude:void 0,savedLatitude:void 0}}componentDidMount(){const e=document.getElementById("360-photo"),t=e.getBoundingClientRect(),i=t.height,n=t.width;this.renderer=new o.WebGLRenderer,this.renderer.setSize(n,i),e.appendChild(this.renderer.domElement),this.scene=new o.Scene,this.camera=new o.PerspectiveCamera(75,n/i,1,1e3),this.camera.target=new o.Vector3(0,0,0),this.sphere=new o.SphereGeometry(100,100,40),this.sphere.applyMatrix((new o.Matrix4).makeScale(-1,1,1)),this.sphereMaterial=new o.MeshBasicMaterial,this.sphereMaterial.map=this.props.texture;const r=new o.Mesh(this.sphere,this.sphereMaterial);this.scene.add(r),this.updateView()}UNSAFE_componentWillUpdate(){this.updateView()}onMouseMove(e){const{savedX:t,savedY:i,savedLongitude:n,savedLatitude:o}=this.state;if(this.state.manualControl){const r=.1*(t-e.clientX)+n,a=.1*(e.clientY-i)+o;this.setState({longitude:r,latitude:a})}}onMouseUp(){this.setState({manualControl:!1})}onMouseDown(e){e.preventDefault(),this.setState({savedLongitude:this.state.longitude,savedLatitude:this.state.latitude,savedX:e.clientX,savedY:e.clientY,manualControl:!0})}updateView(){const e=Math.max(-85,Math.min(85,this.state.latitude));this.camera.target.x=500*Math.sin(o.Math.degToRad(90-e))*Math.cos(o.Math.degToRad(this.state.longitude)),this.camera.target.y=500*Math.cos(o.Math.degToRad(90-e)),this.camera.target.z=500*Math.sin(o.Math.degToRad(90-e))*Math.sin(o.Math.degToRad(this.state.longitude)),this.camera.lookAt(this.camera.target),this.renderer.render(this.scene,this.camera)}render(){return n.default.createElement("div",{id:"360-photo",className:"photo360",onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,role:"img"})}}var u=s;t.default=u},62:function(e,t,i){var n=i(1),o=i(63);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};n(o,r);e.exports=o.locals||{}},63:function(e,t,i){(t=i(2)(!1)).push([e.i,".photo360{height:100%;width:100%}\n",""]),e.exports=t}}]);