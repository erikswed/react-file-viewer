(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{13:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PDFPage=void 0;var i=a(s(0)),o=a(s(17)),n=s(18);function a(e){return e&&e.__esModule?e:{default:e}}s(20),n.PDFJS.disableWorker=!0;class r extends i.default.Component{constructor(e){super(e),this.state={},this.onChange=this.onChange.bind(this)}componentDidMount(){this.props.disableVisibilityCheck&&this.fetchAndRenderPage()}componentDidUpdate(e,t){this.props.disableVisibilityCheck?e.zoom!==this.props.zoom&&this.fetchAndRenderPage():t.isVisible===this.state.isVisible&&e.zoom===this.props.zoom||this.state.isVisible&&this.fetchAndRenderPage()}onChange(e){e&&this.setState({isVisible:e})}fetchAndRenderPage(){const{pdf:e,index:t}=this.props;e.getPage(t).then(this.renderPage.bind(this))}renderPage(e){const{containerWidth:t,zoom:s}=this.props,i=t/e.getViewport(1.1).width,o=i>1.1?1.1:i,n=e.getViewport(o+s),{width:a,height:r}=n,d=this.canvas.getContext("2d");this.canvas.width=a,this.canvas.height=r,e.render({canvasContext:d,viewport:n})}render(){const{index:e}=this.props;return i.default.createElement("div",{key:"page-"+e,className:"pdf-canvas"},this.props.disableVisibilityCheck?i.default.createElement("canvas",{ref:e=>this.canvas=e,width:"670",height:"870"}):i.default.createElement(o.default,{onChange:this.onChange,partialVisibility:!0},i.default.createElement("canvas",{ref:e=>this.canvas=e,width:"670",height:"870"})))}}t.PDFPage=r;class d extends i.default.Component{constructor(e){super(e),this.state={pdf:null,zoom:0,percent:0},this.increaseZoom=this.increaseZoom.bind(this),this.reduceZoom=this.reduceZoom.bind(this),this.resetZoom=this.resetZoom.bind(this)}componentDidMount(){const{filePath:e}=this.props,t=this.container.offsetWidth;n.PDFJS.getDocument(e,null,null,this.progressCallback.bind(this)).then(e=>{this.setState({pdf:e,containerWidth:t})})}setZoom(e){this.setState({zoom:e})}progressCallback(e){const t=(e.loaded/e.total*100).toFixed();this.setState({percent:t})}reduceZoom(){0!==this.state.zoom&&this.setZoom(this.state.zoom-1)}increaseZoom(){this.setZoom(this.state.zoom+1)}resetZoom(){this.setZoom(0)}renderPages(){const{pdf:e,containerWidth:t,zoom:s}=this.state;if(!e)return null;return Array.apply(null,{length:e.numPages}).map((o,n)=>i.default.createElement(r,{index:n+1,key:"pdfPage_"+n,pdf:e,containerWidth:t,zoom:.2*s,disableVisibilityCheck:this.props.disableVisibilityCheck}))}renderLoading(){return this.state.pdf?null:i.default.createElement("div",{className:"pdf-loading"},"LOADING (",this.state.percent,"%)")}render(){const{renderControls:e}=this.props;return i.default.createElement("div",{className:"pdf-viewer-container"},e?e({handleZoomIn:this.increaseZoom,handleZoomOut:this.reduceZoom}):i.default.createElement("div",{className:"pdf-controls-container"},i.default.createElement("button",{type:"button",className:"view-control",onClick:this.increaseZoom},i.default.createElement("i",{className:"zoom-in"})),i.default.createElement("button",{type:"button",className:"view-control",onClick:this.resetZoom},i.default.createElement("i",{className:"zoom-reset"})),i.default.createElement("button",{type:"button",className:"view-control",onClick:this.reduceZoom},i.default.createElement("i",{className:"zoom-out"}))),i.default.createElement("div",{className:"pdf-viewer",ref:e=>this.container=e},this.renderLoading(),this.renderPages()))}}t.default=d,d.defaultProps={disableVisibilityCheck:!1}}}]);